<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heatmap des C√¥nes de Lumi√®re</title>
    
    <!-- Force cache reload - Mode ultra agressif -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Last-Modified" content="0">
    <meta name="cache-control" content="no-cache">
    <meta name="expires" content="0">
    <meta name="pragma" content="no-cache">
    
    <!-- Phase 2 - CSS extrait vers des fichiers s√©par√©s -->
    <link rel="stylesheet" href="css/styles.css?v=4.0.17532862523N.1">
    <link rel="stylesheet" href="css/components.css?v=4.0.17532862523N.2">
    <link rel="stylesheet" href="css/sidepanel.css?v=4.0.17532862523N.3">
</head>
<body>
    <div class="app-layout">
        <!-- Nouveau panneau lat√©ral -->
        <div id="sidePanel" class="side-panel">
            <!-- Header avec toggle -->
            <div class="side-panel-header">
                <button id="sidePanelToggle" class="panel-toggle" title="Masquer/Afficher le panneau">‚óÄ</button>
                <h3>Informations</h3>
            </div>
            
            <!-- Accord√©ons -->
            <div class="accordion-container">
                <div class="accordion-section expanded" data-section="about">
                    <div class="accordion-header">
                        <span>üìñ √Ä Propos</span>
                        <span class="accordion-icon">‚ñº</span>
                    </div>
                    <div class="accordion-content">
                        <!-- Contenu sera migr√© depuis info panel -->
                        <div class="info-buttons">
                            <button id="helpButton" style="
                                background: linear-gradient(45deg, #4a9eff, #74b9ff);
                                color: white;
                                border: none;
                                padding: 6px 12px;
                                border-radius: 15px;
                                cursor: pointer;
                                font-size: 11px;
                                font-weight: bold;
                                box-shadow: 0 0 8px rgba(74, 158, 255, 0.5);
                                transition: all 0.3s;
                            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'" title="Guide math√©matique et physique">
                                ‚ùì Info
                            </button>
                            
                            <button id="infoPanelTwinDemo" style="
                                background: linear-gradient(45deg, #ff6b6b, #feca57);
                                color: white;
                                border: none;
                                padding: 6px 12px;
                                border-radius: 15px;
                                cursor: pointer;
                                font-size: 11px;
                                font-weight: bold;
                                box-shadow: 0 0 8px rgba(255, 107, 107, 0.4);
                                transition: all 0.3s;
                            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'" title="D√©monstration du paradoxe des jumeaux">
                                üöÄ D√©mo
                            </button>
                        </div>
                        
                        <div class="info-details">
                            <!-- Version de l'application -->
                            <div style="background: rgba(74, 158, 255, 0.1); border-left: 3px solid #4a9eff; padding: 8px; margin-bottom: 15px; border-radius: 3px;">
                                <strong style="color: #4a9eff;">üì± Version:</strong> 
                                <span id="appVersion" style="color: #00ff00; font-family: monospace;">Loading...</span>
                                <br>
                                <small style="color: #ccc; font-size: 10px;">
                                    üïí Charg√© le: <span id="loadTime">...</span>
                                </small>
                            </div>
                            
                            <p>Chaque point color√© repr√©sente une relation causale possible depuis l'origine.</p>
                            <p>La couleur encode la vitesse relative n√©cessaire pour connecter ces √©v√©nements.</p>
                            <p><strong>Bleu</strong> = Repos relatif<br>
                               <strong>Vert</strong> = Vitesse interm√©diaire<br>
                               <strong>Rouge</strong> = Vitesse √©lev√©e<br>
                               <strong>Noir</strong> = c et au-del√† (causalement d√©connect√©)</p>
                            <p><strong>üöÄ Cliquez dans un c√¥ne pour cr√©er un nouveau r√©f√©rentiel !</strong></p>
                            <p><strong>üö´ Zone causalement d√©connect√©e</strong></p>
                            <p><em>Les lignes blanches montrent les chemins d'acc√©l√©ration entre r√©f√©rentiels.</em></p>
                            <p><em>Maintenez <strong>Ctrl</strong> en d√©pla√ßant pour contraindre √† une ligne verticale.</em></p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-section" data-section="comments">
                    <div class="accordion-header">
                        <span>üìù Description de la sc√®ne</span>
                        <span class="accordion-icon">‚ñ∂</span>
                    </div>
                    <div class="accordion-content">
                        <div class="comments-toolbar">
                            <button id="boldBtn" title="Gras">B</button>
                            <button id="italicBtn" title="Italique">I</button>
                            <button id="underlineBtn" title="Soulign√©">U</button>
                            <button id="colorBtn" title="Couleur" style="background: #ff6b6b;">A</button>
                            <button id="clearFormatBtn" title="Effacer format">‚úó</button>
                        </div>
                        
                        <div id="commentsEditor" class="comments-content" contenteditable="true" 
                             placeholder="Documentez votre diagramme ici...">
                            <p style="color: #888; font-style: italic;">Cliquez ici pour ajouter vos commentaires sur le diagramme...</p>
                        </div>
                        
                        <div class="comments-actions">
                            <button id="saveComments" title="Sauvegarder commentaires + diagramme (Ctrl+S)">üíæ Sauver</button>
                            <button id="loadComments" title="Charger sauvegarde compl√®te (Ctrl+L)">üìÇ Charger</button>
                            <button id="clearComments" class="clear-btn" title="Effacer tout (commentaires + diagramme)">üóëÔ∏è Effacer</button>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-section" data-section="calculations">
                    <div class="accordion-header">
                        <span>üßÆ Calculs</span>
                        <span class="accordion-icon">‚ñ∂</span>
                    </div>
                    <div class="accordion-content">
                        <h4>Calculs</h4>
                        <p>Cliquez sur un point d'origine pour voir les calculs d√©taill√©s...</p>
                    </div>
                </div>
                
                <div class="accordion-section" data-section="settings">
                    <div class="accordion-header">
                        <span>‚öôÔ∏è R√©glages</span>
                        <span class="accordion-icon">‚ñ∂</span>
                    </div>
                    <div class="accordion-content">
                        <!-- Contenu sera migr√© depuis controls panel -->
                        <div class="control-group">
                            <label for="resolutionSlider">R√©solution d'affichage: <span id="resolutionValue">Moyenne</span></label>
                            <input type="range" id="resolutionSlider" min="1" max="3" value="2" step="1">
                        </div>
                        
                        <div class="control-group">
                            <label for="greenLimitSlider">Limite verte: <span id="greenLimitValue">80% c</span></label>
                            <input type="range" id="greenLimitSlider" min="0.1" max="0.95" value="0.8" step="0.05">
                            <!-- D√©placer la barre de gradient et la l√©gende juste ici -->
                            <div class="gradient-bar-container">
                                <div class="gradient-bar" id="gradientBar"></div>
                                <div class="gradient-labels">
                                    <span>0</span>
                                    <span id="greenLabel">80% c</span>
                                    <span>c</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label>
                                <input type="checkbox" id="showPastCone" checked>
                                Afficher c√¥ne pass√©
                            </label>
                        </div>
                        
                        <div class="control-group">
                            <button id="resetButton">üîÑ R√©initialiser</button>
                        </div>
                        
                        <!-- Barre de gradient -->
                    </div>
                </div>
            </div>
            
            <!-- Resize handle -->
            <div class="resize-handle" title="Redimensionner le panneau"></div>
        </div>
        
        <!-- Container pour le canvas -->
        <div id="canvasContainer" class="canvas-container">
            <canvas id="canvas"></canvas>
            <!-- Bouton flottant pour r√©ouvrir le panneau quand il est masqu√© -->
            <button id="floatingReopenBtn" class="floating-reopen-btn" title="Afficher le panneau d'informations">‚ñ∂</button>
            
            <!-- Help Modal d√©plac√©e ici pour ne couvrir que le canevas -->
            <div id="helpModal" class="help-modal">
                <div class="help-modal-content">
                    <span id="helpClose" class="help-close">&times;</span>
                    <h1 style="color: #4a9eff; text-align: center; margin-bottom: 30px; text-shadow: 0 0 15px rgba(74, 158, 255, 0.5);">
                        üåå Guide Math√©matique et Physique
                    </h1>
                    
                    <div class="help-section">
                        <h3>üéØ Objectif de l'Application</h3>
                        <p>Cette application visualise interactivement les <strong>c√¥nes de lumi√®re</strong> en relativit√© restreinte et permet d'explorer les effets de <strong>l'acc√©l√©ration</strong> et de la <strong>dilatation temporelle</strong> √† travers des trajectoires dans l'espace-temps.</p>
                        <p>Chaque clic dans un c√¥ne cr√©e un nouveau <strong>r√©f√©rentiel</strong> connect√© causalement, permettant de construire des trajectoires complexes et d'observer leurs effets cumulatifs.</p>
                    </div>

                    <div class="help-section">
                        <h3>üìê Syst√®me de Coordonn√©es</h3>
                        <p>Nous utilisons un diagramme d'espace-temps de Minkowski en 2D :</p>
                        <ul>
                            <li><strong>Axe horizontal</strong> : Position spatiale <span class="help-variable">x</span></li>
                            <li><strong>Axe vertical</strong> : Temps coordonn√©e <span class="help-variable">t</span> (vers le haut = futur)</li>
                            <li><strong>Unit√©s normalis√©es</strong> : <span class="help-constant">c = 1</span> (vitesse de la lumi√®re)</li>
                            <li><strong>Origine</strong> : Point (0, 0) au bas de l'√©cran</li>
                        </ul>
                        
                        <div class="help-formula">
                            M√©trique de Minkowski : ds¬≤ = -c¬≤dt¬≤ + dx¬≤
                            <br>Avec c = 1 : ds¬≤ = -dt¬≤ + dx¬≤
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>üîÜ C√¥nes de Lumi√®re</h3>
                        <p>Les c√¥nes de lumi√®re d√©limitent les r√©gions causalement connect√©es :</p>
                        
                        <div class="help-formula">
                            Condition du c√¥ne de lumi√®re : |<span class="help-variable">Œîx</span>| ‚â§ <span class="help-constant">c</span> √ó <span class="help-variable">Œît</span>
                            <br>Avec c = 1 : |<span class="help-variable">Œîx</span>| ‚â§ <span class="help-variable">Œît</span>
                        </div>
                        
                        <ul>
                            <li><strong>Int√©rieur du c√¥ne</strong> : Connexion causale possible (v &lt; c)</li>
                            <li><strong>Surface du c√¥ne</strong> : Propagation √† la vitesse de la lumi√®re (v = c)</li>
                            <li><strong>Ext√©rieur du c√¥ne</strong> : Causalement d√©connect√© (v &gt; c)</li>
                        </ul>
                        
                        <div class="help-example">
                            <strong>üí° Exemple :</strong> Si Œît = 3 unit√©s, alors |Œîx| doit √™tre ‚â§ 3 unit√©s pour rester dans le c√¥ne.
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>üöÄ Acc√©l√©ration Relativiste</h3>
                        <p>Pour une trajectoire d'acc√©l√©ration constante entre deux √©v√©nements :</p>
                        
                        <div class="help-formula">
                            Acc√©l√©ration propre : <span class="help-variable">a</span> = 2|<span class="help-variable">ŒîX</span>|<span class="help-constant">c¬≤</span> / (<span class="help-variable">ŒîT¬≤</span> - <span class="help-variable">ŒîX¬≤</span>)
                        </div>
                        
                        <div class="help-formula">
                            Vitesse finale : <span class="help-variable">v</span> = (<span class="help-variable">a</span><span class="help-variable">ŒîT</span>) / ‚àö(1 + (<span class="help-variable">a</span><span class="help-variable">ŒîT</span>/<span class="help-constant">c</span>)¬≤)
                        </div>
                        
                        <div class="help-formula">
                            Trajectoire hyperbolique : <span class="help-variable">x</span>(t) = (<span class="help-constant">c¬≤</span>/<span class="help-variable">a</span>) √ó (‚àö(1 + (<span class="help-variable">at</span>/<span class="help-constant">c</span>)¬≤) - 1)
                        </div>
                        
                        <div class="help-warning">
                            ‚ö†Ô∏è <strong>Limite physique :</strong> Notre application limite les vitesses √† 99.9% de c pour √©viter les singularit√©s num√©riques.
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>‚è∞ Temps Propre et Dilatation Temporelle</h3>
                        <p>Le temps propre est le temps mesur√© par une horloge en mouvement :</p>
                        
                        <div class="help-formula">
                            Temps propre : <span class="help-variable">œÑ</span> = (<span class="help-constant">c</span>/<span class="help-variable">a</span>) √ó sinh‚Åª¬π(<span class="help-variable">a</span><span class="help-variable">ŒîT</span>/<span class="help-constant">c</span>)
                        </div>
                        
                        <div class="help-formula">
                            Facteur de Lorentz : <span class="help-variable">Œ≥</span> = 1/‚àö(1 - <span class="help-variable">v¬≤</span>/<span class="help-constant">c¬≤</span>)
                        </div>
                        
                        <div class="help-formula">
                            Relation : <span class="help-variable">dt</span> = <span class="help-variable">Œ≥</span> √ó <span class="help-variable">dœÑ</span>
                        </div>
                        
                        <div class="help-example">
                            <strong>üéØ Paradoxe des jumeaux :</strong> Un voyageur acc√©l√©r√© vieillit moins qu'un observateur au repos. Le pourcentage affich√© montre le rapport œÑ/t.
                        </div>
                        
                        <!-- BOUTON DEMO PARADOXE DES JUMEAUX - SECTION TEMPS PROPRE -->
                        <div style="text-align: center; margin: 15px 0;">
                            <button class="twin-paradox-demo-btn" style="
                                background: linear-gradient(45deg, #ff6b6b, #feca57);
                                color: white;
                                border: none;
                                padding: 8px 16px;
                                border-radius: 20px;
                                cursor: pointer;
                                font-size: 12px;
                                font-weight: bold;
                                box-shadow: 0 3px 10px rgba(255, 107, 107, 0.4);
                                transition: all 0.3s;
                                text-transform: uppercase;
                                letter-spacing: 0.5px;
                            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                                üöÄ Voir la D√©mo
                            </button>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>‚ûï Addition Relativiste des Vitesses</h3>
                        <p>Les vitesses ne s'additionnent pas simplement en relativit√© :</p>
                        
                        <div class="help-formula">
                            <span class="help-variable">v</span>_total = (<span class="help-variable">v‚ÇÅ</span> + <span class="help-variable">v‚ÇÇ</span>) / (1 + <span class="help-variable">v‚ÇÅ</span><span class="help-variable">v‚ÇÇ</span>/<span class="help-constant">c¬≤</span>)
                        </div>
                        
                        <div class="help-example">
                            <strong>üí° Exemple :</strong> Si v‚ÇÅ = 0.6c et v‚ÇÇ = 0.6c, alors v_total = 1.2c/(1 + 0.36) = 0.88c ‚â† 1.2c
                        </div>
                        
                        <p>Cette formule garantit que la vitesse r√©sultante reste toujours inf√©rieure √† c.</p>
                    </div>

                    <div class="help-section">
                        <h3>üìà Isochrones</h3>
                        <p>Les courbes orange montrent tous les √©v√©nements atteignables avec le m√™me temps propre :</p>
                        
                        <div class="help-formula">
                            √âquation d'isochrone : <span class="help-variable">t</span> = ‚àö(<span class="help-variable">œÑ¬≤</span> + <span class="help-variable">x¬≤</span>/<span class="help-constant">c¬≤</span>)
                        </div>
                        
                        <p>Ces hyperboles r√©v√®lent la g√©om√©trie non-euclidienne de l'espace-temps de Minkowski.</p>
                        
                        <div class="help-example">
                            <strong>üîç Interpr√©tation :</strong> Tous les points sur une isochrone repr√©sentent des √©v√©nements que le voyageur peut atteindre en vieillissant du m√™me temps propre œÑ.
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>üé® Code Couleur de la Heatmap</h3>
                        <ul>
                            <li><span style="color: #0000ff;">üîµ Bleu</span> : Repos relatif (v ‚âà 0)</li>
                            <li><span style="color: #00ff00;">üü¢ Vert</span> : Vitesse interm√©diaire (ajustable)</li>
                            <li><span style="color: #ff0000;">üî¥ Rouge</span> : Vitesse √©lev√©e (proche de c)</li>
                            <li><span style="color: #888;">‚ö´ Transparent</span> : Causalement d√©connect√© (v ‚â• c)</li>
                        </ul>
                        
                        <div class="help-formula">
                            Vitesse relative : <span class="help-variable">v</span> = |<span class="help-variable">Œîx</span>| / <span class="help-variable">Œît</span>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>üéÆ Utilisation Interactive</h3>
                        <ol>
                            <li><strong>Cr√©er un r√©f√©rentiel :</strong> Cliquez dans un c√¥ne de lumi√®re</li>
                            <li><strong>D√©placer un r√©f√©rentiel :</strong> Glissez-d√©posez les points orange</li>
                            <li><strong>Contrainte verticale :</strong> Maintenez Ctrl pendant le d√©placement</li>
                            <li><strong>S√©lectionner :</strong> Cliquez sur un point pour voir les calculs d√©taill√©s</li>
                            <li><strong>Supprimer :</strong> Utilisez le bouton üóëÔ∏è dans le panneau de calculs</li>
                            <li><strong>Explorer les isochrones :</strong> Survolez les courbes orange</li>
                        </ol>
                        
                        <div class="help-example">
                            <strong>üéì Conseil p√©dagogique :</strong> Cr√©ez plusieurs r√©f√©rentiels en cha√Æne pour observer l'accumulation des effets relativistes et comparer les temps propres !
                        </div>
                        
                        <div style="text-align: center; margin: 20px 0;">
                            <button id="twinParadoxDemo" style="
                                background: linear-gradient(45deg, #ff6b6b, #feca57);
                                color: white;
                                border: none;
                                padding: 12px 24px;
                                border-radius: 25px;
                                cursor: pointer;
                                font-size: 14px;
                                font-weight: bold;
                                box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
                                transition: all 0.3s;
                                text-transform: uppercase;
                                letter-spacing: 1px;
                            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                                üöÄ D√©mo du Paradoxe des Jumeaux
                            </button>
                        </div>
                        
                        <div class="help-example">
                            <strong>üé≠ Sc√©nario de la d√©mo :</strong> 
                            <br>‚Ä¢ <strong>Jumeau terrestre</strong> reste √† l'origine (r√©f√©rentiel 0)
                            <br>‚Ä¢ <strong>Jumeau voyageur</strong> acc√©l√®re vers l'espace (r√©f√©rentiel 1)
                            <br>‚Ä¢ <strong>Demi-tour</strong> √† mi-parcours (r√©f√©rentiel 2)
                            <br>‚Ä¢ <strong>Retour sur Terre</strong> (r√©f√©rentiel 3)
                            <br>‚Ä¢ <strong>Comparaison</strong> des temps propres et √¢ges !
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>üìö R√©f√©rences Th√©oriques</h3>
                        <ul>
                            <li><strong>Relativit√© restreinte</strong> : Einstein (1905)</li>
                            <li><strong>Espace-temps de Minkowski</strong> : Hermann Minkowski (1908)</li>
                            <li><strong>G√©om√©trie hyperbolique</strong> : Th√©orie des espaces pseudo-euclidiens</li>
                            <li><strong>Paradoxe des jumeaux</strong> : Langevin (1911)</li>
                        </ul>
                        
                        <p style="text-align: center; margin-top: 30px; color: #4a9eff;">
                            <em>Cette application est un outil p√©dagogique pour explorer visuellement les concepts fondamentaux de la relativit√© restreinte.</em>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ancien panneau de contr√¥les supprim√© - maintenant dans le panneau lat√©ral -->


    <!-- JavaScript files -->
    <script type="module" src="js/main.js?v=4.0.17532862523N.4"></script>
</body>
</html> 