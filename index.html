<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heatmap des CÃ´nes de LumiÃ¨re</title>
    
    <!-- Force cache reload - Mode ultra agressif -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Last-Modified" content="0">
    <meta name="cache-control" content="no-cache">
    <meta name="expires" content="0">
    <meta name="pragma" content="no-cache">
    
    <!-- Phase 2 - CSS extrait vers des fichiers sÃ©parÃ©s -->
    <link rel="stylesheet" href="css/styles.css?v=4.0.17532862523N.1">
    <link rel="stylesheet" href="css/components.css?v=4.0.17532862523N.2">
    <link rel="stylesheet" href="css/sidepanel.css?v=4.0.17532862523N.3">
</head>
<body>
    <div class="app-layout">
        <!-- Nouveau panneau latÃ©ral -->
        <div id="sidePanel" class="side-panel">
            <!-- Header avec toggle -->
            <div class="side-panel-header">
                <button id="sidePanelToggle" class="panel-toggle" title="Masquer/Afficher le panneau">â—€</button>
                <h3>Informations</h3>
            </div>
            
            <!-- AccordÃ©ons -->
            <div class="accordion-container">
                <div class="accordion-section expanded" data-section="about">
                    <div class="accordion-header">
                        <span>ğŸ“– Ã€ Propos</span>
                        <span class="accordion-icon">â–¼</span>
                    </div>
                    <div class="accordion-content">
                        <!-- Contenu sera migrÃ© depuis info panel -->
                        <div class="info-buttons">
                            <button id="helpButton" style="
                                background: linear-gradient(45deg, #4a9eff, #74b9ff);
                                color: white;
                                border: none;
                                padding: 6px 12px;
                                border-radius: 15px;
                                cursor: pointer;
                                font-size: 11px;
                                font-weight: bold;
                                box-shadow: 0 0 8px rgba(74, 158, 255, 0.5);
                                transition: all 0.3s;
                            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'" title="Guide mathÃ©matique et physique">
                                â“ Info
                            </button>
                            
                            <button id="infoPanelTwinDemo" style="
                                background: linear-gradient(45deg, #ff6b6b, #feca57);
                                color: white;
                                border: none;
                                padding: 6px 12px;
                                border-radius: 15px;
                                cursor: pointer;
                                font-size: 11px;
                                font-weight: bold;
                                box-shadow: 0 0 8px rgba(255, 107, 107, 0.4);
                                transition: all 0.3s;
                            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'" title="DÃ©monstration du paradoxe des jumeaux">
                                ğŸš€ DÃ©mo
                            </button>
                        </div>
                        
                        <div class="info-details">
                            <!-- Version de l'application -->
                            <div style="background: rgba(74, 158, 255, 0.1); border-left: 3px solid #4a9eff; padding: 8px; margin-bottom: 15px; border-radius: 3px;">
                                <strong style="color: #4a9eff;">ğŸ“± Version:</strong> 
                                <span id="appVersion" style="color: #00ff00; font-family: monospace;">Loading...</span>
                                <br>
                                <small style="color: #ccc; font-size: 10px;">
                                    ğŸ•’ ChargÃ© le: <span id="loadTime">...</span>
                                </small>
                            </div>
                            
                            <p>Chaque point colorÃ© reprÃ©sente une relation causale possible depuis l'origine.</p>
                            <p>La couleur encode la vitesse relative nÃ©cessaire pour connecter ces Ã©vÃ©nements.</p>
                            <p><strong>Bleu</strong> = Repos relatif<br>
                               <strong>Vert</strong> = Vitesse intermÃ©diaire<br>
                               <strong>Rouge</strong> = Vitesse Ã©levÃ©e<br>
                               <strong>Noir</strong> = c et au-delÃ  (causalement dÃ©connectÃ©)</p>
                            <p><strong>ğŸš€ Cliquez dans un cÃ´ne pour crÃ©er un nouveau rÃ©fÃ©rentiel !</strong></p>
                            <p><strong>ğŸš« Zone causalement dÃ©connectÃ©e</strong></p>
                            <p><em>Les lignes blanches montrent les chemins d'accÃ©lÃ©ration entre rÃ©fÃ©rentiels.</em></p>
                            <p><em>Maintenez <strong>Ctrl</strong> en dÃ©plaÃ§ant pour contraindre Ã  une ligne verticale.</em></p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-section" data-section="comments">
                    <div class="accordion-header">
                        <span>ğŸ“ Description de la scÃ¨ne</span>
                        <span class="accordion-icon">â–¶</span>
                    </div>
                    <div class="accordion-content">
                        <div class="comments-toolbar">
                            <button id="boldBtn" title="Gras">B</button>
                            <button id="italicBtn" title="Italique">I</button>
                            <button id="underlineBtn" title="SoulignÃ©">U</button>
                            <button id="colorBtn" title="Couleur" style="background: #ff6b6b;">A</button>
                            <button id="clearFormatBtn" title="Effacer format">âœ—</button>
                        </div>
                        
                        <div id="commentsEditor" class="comments-content" contenteditable="true" 
                             placeholder="Documentez votre diagramme ici...">
                            <p style="color: #888; font-style: italic;">Cliquez ici pour ajouter vos commentaires sur le diagramme...</p>
                        </div>
                        
                        <div class="comments-actions">
                            <button id="saveComments" title="Sauvegarder commentaires + diagramme (Ctrl+S)">ğŸ’¾ Sauver</button>
                            <button id="loadComments" title="Charger sauvegarde complÃ¨te (Ctrl+L)">ğŸ“‚ Charger</button>
                            <button id="clearComments" class="clear-btn" title="Effacer tout (commentaires + diagramme)">ğŸ—‘ï¸ Effacer</button>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-section" data-section="calculations">
                    <div class="accordion-header">
                        <span>ğŸ§® Calculs</span>
                        <span class="accordion-icon">â–¶</span>
                    </div>
                    <div class="accordion-content">
                        <h4>Calculs</h4>
                        <p>Cliquez sur un point d'origine pour voir les calculs dÃ©taillÃ©s...</p>
                    </div>
                </div>
                
                <div class="accordion-section" data-section="settings">
                    <div class="accordion-header">
                        <span>âš™ï¸ RÃ©glages</span>
                        <span class="accordion-icon">â–¶</span>
                    </div>
                    <div class="accordion-content">
                        <!-- Contenu sera migrÃ© depuis controls panel -->
                        <div class="control-group">
                            <label for="resolutionSlider">RÃ©solution d'affichage: <span id="resolutionValue">Moyenne</span></label>
                            <input type="range" id="resolutionSlider" min="1" max="3" value="2" step="1">
                        </div>
                        
                        <div class="control-group">
                            <label for="greenLimitSlider">Limite verte: <span id="greenLimitValue">80% c</span></label>
                            <input type="range" id="greenLimitSlider" min="0.1" max="0.95" value="0.8" step="0.05">
                            <!-- DÃ©placer la barre de gradient et la lÃ©gende juste ici -->
                            <div class="gradient-bar-container">
                                <div class="gradient-bar" id="gradientBar"></div>
                                <div class="gradient-labels">
                                    <span>0</span>
                                    <span id="greenLabel">80% c</span>
                                    <span>c</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label>
                                <input type="checkbox" id="showPastCone" checked>
                                Afficher cÃ´ne passÃ©
                            </label>
                        </div>
                        
                        <div class="control-group">
                            <button id="resetButton">ğŸ”„ RÃ©initialiser</button>
                        </div>
                        
                        <!-- Barre de gradient -->
                    </div>
                </div>
            </div>
            
            <!-- Resize handle -->
            <div class="resize-handle" title="Redimensionner le panneau"></div>
        </div>
        
        <!-- Container pour le canvas -->
        <div id="canvasContainer" class="canvas-container">
            <canvas id="canvas"></canvas>
            <!-- Bouton flottant pour rÃ©ouvrir le panneau quand il est masquÃ© -->
            <button id="floatingReopenBtn" class="floating-reopen-btn" title="Afficher le panneau d'informations">â–¶</button>
            
            <!-- Help Modal dÃ©placÃ©e ici pour ne couvrir que le canevas -->
            <div id="helpModal" class="help-modal">
                <div class="help-modal-content">
                    <span id="helpClose" class="help-close">&times;</span>
                    <h1 style="color: #4a9eff; text-align: center; margin-bottom: 30px; text-shadow: 0 0 15px rgba(74, 158, 255, 0.5);">
                        ğŸŒŒ Guide MathÃ©matique et Physique
                    </h1>
                    
                    <div class="help-section">
                        <h3>ğŸ¯ Objectif de l'Application</h3>
                        <p>Cette application visualise interactivement les <strong>cÃ´nes de lumiÃ¨re</strong> en relativitÃ© restreinte et permet d'explorer les effets de <strong>l'accÃ©lÃ©ration</strong> et de la <strong>dilatation temporelle</strong> Ã  travers des trajectoires dans l'espace-temps.</p>
                        <p>Chaque clic dans un cÃ´ne crÃ©e un nouveau <strong>rÃ©fÃ©rentiel</strong> connectÃ© causalement, permettant de construire des trajectoires complexes et d'observer leurs effets cumulatifs.</p>
                    </div>

                    <div class="help-section">
                        <h3>ğŸ“ SystÃ¨me de CoordonnÃ©es</h3>
                        <p>Nous utilisons un diagramme d'espace-temps de Minkowski en 2D :</p>
                        <ul>
                            <li><strong>Axe horizontal</strong> : Position spatiale <span class="help-variable">x</span></li>
                            <li><strong>Axe vertical</strong> : Temps coordonnÃ©e <span class="help-variable">t</span> (vers le haut = futur)</li>
                            <li><strong>UnitÃ©s normalisÃ©es</strong> : <span class="help-constant">c = 1</span> (vitesse de la lumiÃ¨re)</li>
                            <li><strong>Origine</strong> : Point (0, 0) au bas de l'Ã©cran</li>
                        </ul>
                        
                        <div class="help-formula">
                            MÃ©trique de Minkowski : dsÂ² = -cÂ²dtÂ² + dxÂ²
                            <br>Avec c = 1 : dsÂ² = -dtÂ² + dxÂ²
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>ğŸ”† CÃ´nes de LumiÃ¨re</h3>
                        <p>Les cÃ´nes de lumiÃ¨re dÃ©limitent les rÃ©gions causalement connectÃ©es :</p>
                        
                        <div class="help-formula">
                            Condition du cÃ´ne de lumiÃ¨re : |<span class="help-variable">Î”x</span>| â‰¤ <span class="help-constant">c</span> Ã— <span class="help-variable">Î”t</span>
                            <br>Avec c = 1 : |<span class="help-variable">Î”x</span>| â‰¤ <span class="help-variable">Î”t</span>
                        </div>
                        
                        <ul>
                            <li><strong>IntÃ©rieur du cÃ´ne</strong> : Connexion causale possible (v &lt; c)</li>
                            <li><strong>Surface du cÃ´ne</strong> : Propagation Ã  la vitesse de la lumiÃ¨re (v = c)</li>
                            <li><strong>ExtÃ©rieur du cÃ´ne</strong> : Causalement dÃ©connectÃ© (v &gt; c)</li>
                        </ul>
                        
                        <div class="help-example">
                            <strong>ğŸ’¡ Exemple :</strong> Si Î”t = 3 unitÃ©s, alors |Î”x| doit Ãªtre â‰¤ 3 unitÃ©s pour rester dans le cÃ´ne.
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>ğŸš€ AccÃ©lÃ©ration Relativiste</h3>
                        <p>Pour une trajectoire d'accÃ©lÃ©ration constante entre deux Ã©vÃ©nements :</p>
                        
                        <div class="help-formula">
                            AccÃ©lÃ©ration propre : <span class="help-variable">a</span> = 2|<span class="help-variable">Î”X</span>|<span class="help-constant">cÂ²</span> / (<span class="help-variable">Î”TÂ²</span> - <span class="help-variable">Î”XÂ²</span>)
                        </div>
                        
                        <div class="help-formula">
                            Vitesse finale : <span class="help-variable">v</span> = (<span class="help-variable">a</span><span class="help-variable">Î”T</span>) / âˆš(1 + (<span class="help-variable">a</span><span class="help-variable">Î”T</span>/<span class="help-constant">c</span>)Â²)
                        </div>
                        
                        <div class="help-formula">
                            Trajectoire hyperbolique : <span class="help-variable">x</span>(t) = (<span class="help-constant">cÂ²</span>/<span class="help-variable">a</span>) Ã— (âˆš(1 + (<span class="help-variable">at</span>/<span class="help-constant">c</span>)Â²) - 1)
                        </div>
                        
                        <div class="help-warning">
                            âš ï¸ <strong>Limite physique :</strong> Notre application limite les vitesses Ã  99.9% de c pour Ã©viter les singularitÃ©s numÃ©riques.
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>â° Temps Propre et Dilatation Temporelle</h3>
                        <p>Le temps propre est le temps mesurÃ© par une horloge en mouvement :</p>
                        
                        <div class="help-formula">
                            Temps propre : <span class="help-variable">Ï„</span> = (<span class="help-constant">c</span>/<span class="help-variable">a</span>) Ã— sinhâ»Â¹(<span class="help-variable">a</span><span class="help-variable">Î”T</span>/<span class="help-constant">c</span>)
                        </div>
                        
                        <div class="help-formula">
                            Facteur de Lorentz : <span class="help-variable">Î³</span> = 1/âˆš(1 - <span class="help-variable">vÂ²</span>/<span class="help-constant">cÂ²</span>)
                        </div>
                        
                        <div class="help-formula">
                            Relation : <span class="help-variable">dt</span> = <span class="help-variable">Î³</span> Ã— <span class="help-variable">dÏ„</span>
                        </div>
                        
                        <div class="help-example">
                            <strong>ğŸ¯ Paradoxe des jumeaux :</strong> Un voyageur accÃ©lÃ©rÃ© vieillit moins qu'un observateur au repos. Le pourcentage affichÃ© montre le rapport Ï„/t.
                        </div>
                        
                        <!-- BOUTON DEMO PARADOXE DES JUMEAUX - SECTION TEMPS PROPRE -->
                        <div style="text-align: center; margin: 15px 0;">
                            <button class="twin-paradox-demo-btn" style="
                                background: linear-gradient(45deg, #ff6b6b, #feca57);
                                color: white;
                                border: none;
                                padding: 8px 16px;
                                border-radius: 20px;
                                cursor: pointer;
                                font-size: 12px;
                                font-weight: bold;
                                box-shadow: 0 3px 10px rgba(255, 107, 107, 0.4);
                                transition: all 0.3s;
                                text-transform: uppercase;
                                letter-spacing: 0.5px;
                            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                                ğŸš€ Voir la DÃ©mo
                            </button>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>â• Addition Relativiste des Vitesses</h3>
                        <p>Les vitesses ne s'additionnent pas simplement en relativitÃ© :</p>
                        
                        <div class="help-formula">
                            <span class="help-variable">v</span>_total = (<span class="help-variable">vâ‚</span> + <span class="help-variable">vâ‚‚</span>) / (1 + <span class="help-variable">vâ‚</span><span class="help-variable">vâ‚‚</span>/<span class="help-constant">cÂ²</span>)
                        </div>
                        
                        <div class="help-example">
                            <strong>ğŸ’¡ Exemple :</strong> Si vâ‚ = 0.6c et vâ‚‚ = 0.6c, alors v_total = 1.2c/(1 + 0.36) = 0.88c â‰  1.2c
                        </div>
                        
                        <p>Cette formule garantit que la vitesse rÃ©sultante reste toujours infÃ©rieure Ã  c.</p>
                    </div>

                    <div class="help-section">
                        <h3>ğŸ“ˆ Isochrones</h3>
                        <p>Les courbes orange montrent tous les Ã©vÃ©nements atteignables avec le mÃªme temps propre :</p>
                        
                        <div class="help-formula">
                            Ã‰quation d'isochrone : <span class="help-variable">t</span> = âˆš(<span class="help-variable">Ï„Â²</span> + <span class="help-variable">xÂ²</span>/<span class="help-constant">cÂ²</span>)
                        </div>
                        
                        <p>Ces hyperboles rÃ©vÃ¨lent la gÃ©omÃ©trie non-euclidienne de l'espace-temps de Minkowski.</p>
                        
                        <div class="help-example">
                            <strong>ğŸ” InterprÃ©tation :</strong> Tous les points sur une isochrone reprÃ©sentent des Ã©vÃ©nements que le voyageur peut atteindre en vieillissant du mÃªme temps propre Ï„.
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>ğŸ¨ Code Couleur de la Heatmap</h3>
                        <ul>
                            <li><span style="color: #0000ff;">ğŸ”µ Bleu</span> : Repos relatif (v â‰ˆ 0)</li>
                            <li><span style="color: #00ff00;">ğŸŸ¢ Vert</span> : Vitesse intermÃ©diaire (ajustable)</li>
                            <li><span style="color: #ff0000;">ğŸ”´ Rouge</span> : Vitesse Ã©levÃ©e (proche de c)</li>
                            <li><span style="color: #888;">âš« Transparent</span> : Causalement dÃ©connectÃ© (v â‰¥ c)</li>
                        </ul>
                        
                        <div class="help-formula">
                            Vitesse relative : <span class="help-variable">v</span> = |<span class="help-variable">Î”x</span>| / <span class="help-variable">Î”t</span>
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>ğŸ® Utilisation Interactive</h3>
                        <ol>
                            <li><strong>CrÃ©er un rÃ©fÃ©rentiel :</strong> Cliquez dans un cÃ´ne de lumiÃ¨re</li>
                            <li><strong>DÃ©placer un rÃ©fÃ©rentiel :</strong> Glissez-dÃ©posez les points orange</li>
                            <li><strong>Contrainte verticale :</strong> Maintenez Ctrl pendant le dÃ©placement</li>
                            <li><strong>SÃ©lectionner :</strong> Cliquez sur un point pour voir les calculs dÃ©taillÃ©s</li>
                            <li><strong>Supprimer :</strong> Utilisez le bouton ğŸ—‘ï¸ dans le panneau de calculs</li>
                            <li><strong>Explorer les isochrones :</strong> Survolez les courbes orange</li>
                        </ol>
                        
                        <div class="help-example">
                            <strong>ğŸ“ Conseil pÃ©dagogique :</strong> CrÃ©ez plusieurs rÃ©fÃ©rentiels en chaÃ®ne pour observer l'accumulation des effets relativistes et comparer les temps propres !
                        </div>
                        
                        <div style="text-align: center; margin: 20px 0;">
                            <button id="twinParadoxDemo" style="
                                background: linear-gradient(45deg, #ff6b6b, #feca57);
                                color: white;
                                border: none;
                                padding: 12px 24px;
                                border-radius: 25px;
                                cursor: pointer;
                                font-size: 14px;
                                font-weight: bold;
                                box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
                                transition: all 0.3s;
                                text-transform: uppercase;
                                letter-spacing: 1px;
                            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                                ğŸš€ DÃ©mo du Paradoxe des Jumeaux
                            </button>
                        </div>
                        
                        <div class="help-example">
                            <strong>ğŸ­ ScÃ©nario de la dÃ©mo :</strong> 
                            <br>â€¢ <strong>Jumeau terrestre</strong> reste Ã  l'origine (rÃ©fÃ©rentiel 0)
                            <br>â€¢ <strong>Jumeau voyageur</strong> accÃ©lÃ¨re vers l'espace (rÃ©fÃ©rentiel 1)
                            <br>â€¢ <strong>Demi-tour</strong> Ã  mi-parcours (rÃ©fÃ©rentiel 2)
                            <br>â€¢ <strong>Retour sur Terre</strong> (rÃ©fÃ©rentiel 3)
                            <br>â€¢ <strong>Comparaison</strong> des temps propres et Ã¢ges !
                        </div>
                    </div>

                    <div class="help-section">
                        <h3>ğŸ“š RÃ©fÃ©rences ThÃ©oriques</h3>
                        <ul>
                            <li><strong>RelativitÃ© restreinte</strong> : Einstein (1905)</li>
                            <li><strong>Espace-temps de Minkowski</strong> : Hermann Minkowski (1908)</li>
                            <li><strong>GÃ©omÃ©trie hyperbolique</strong> : ThÃ©orie des espaces pseudo-euclidiens</li>
                            <li><strong>Paradoxe des jumeaux</strong> : Langevin (1911)</li>
                        </ul>
                        
                        <p style="text-align: center; margin-top: 30px; color: #4a9eff;">
                            <em>Cette application est un outil pÃ©dagogique pour explorer visuellement les concepts fondamentaux de la relativitÃ© restreinte.</em>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ancien panneau de contrÃ´les supprimÃ© - maintenant dans le panneau latÃ©ral -->


    <!-- JavaScript files -->
    <script type="module" src="js/main.js?v=4.0.17532862523N.4"></script>
</body>
</html> 