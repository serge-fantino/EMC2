<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Bridge Module</title>
</head>
<body>
    <h1>üß™ Test du Bridge Module</h1>
    <div id="results"></div>

    <script type="module">
        import { 
            calculateAccelerationTrajectory,
            getRendezvousInfo 
        } from './js/physics/bridge.js';

        const results = document.getElementById('results');

        // Test 1: V√©rifier que le bridge utilise le nouveau syst√®me
        results.innerHTML = '<h2>Test 1: V√©rification du nouveau syst√®me</h2>';

        try {
            const fromCone = { x: 0, t: 0 };
            const toCone = { x: 10, t: 12 };
            
            const trajectory = calculateAccelerationTrajectory(fromCone, toCone, 0);
            
            results.innerHTML += `
                <p>‚úÖ Trajectoire g√©n√©r√©e avec ${trajectory.length} points</p>
                <p>Point final: (${trajectory[trajectory.length-1].x.toFixed(2)}, ${trajectory[trajectory.length-1].t.toFixed(2)})</p>
            `;

            // V√©rifier si les nouvelles donn√©es sont pr√©sentes
            const hasNewData = trajectory[0] && trajectory[0].rendezvous;
            results.innerHTML += `
                <p>${hasNewData ? '‚úÖ' : '‚ùå'} Nouvelles donn√©es de rendez-vous: ${hasNewData ? 'PR√âSENTES' : 'ABSENTES'}</p>
            `;

            if (hasNewData) {
                const rendezvous = trajectory[0].rendezvous;
                results.innerHTML += `
                    <p>üìä Donn√©es du rendez-vous:</p>
                    <ul>
                        <li>Acc√©l√©ration Œ±: ${rendezvous.alpha.toFixed(4)} c/an</li>
                        <li>Temps propre œÑ_f: ${rendezvous.tau_f.toFixed(2)} ans</li>
                        <li>Vitesse finale v_f: ${rendezvous.v_f.toFixed(3)} c</li>
                        <li>√ânergie consomm√©e: ${rendezvous.energyConsumed.toFixed(4)} m‚ÇÄc¬≤</li>
                    </ul>
                `;
            }

        } catch (error) {
            results.innerHTML += `<p>‚ùå Erreur: ${error.message}</p>`;
        }

        // Test 2: V√©rifier la validation de causalit√©
        results.innerHTML += '<h2>Test 2: Validation de causalit√©</h2>';

        try {
            const fromCone = { x: 0, t: 0 };
            const toCone = { x: 15, t: 10 }; // Violation de causalit√©
            
            const trajectory = calculateAccelerationTrajectory(fromCone, toCone, 0);
            
            results.innerHTML += `
                <p>${trajectory.length > 0 ? '‚ùå' : '‚úÖ'} Trajectoire impossible: ${trajectory.length === 0 ? 'CORRECTEMENT REJET√âE' : 'INCORRECTEMENT ACCEPT√âE'}</p>
            `;

        } catch (error) {
            results.innerHTML += `<p>‚úÖ Erreur correctement d√©tect√©e: ${error.message}</p>`;
        }

        // Test 3: V√©rifier le cas de d√©c√©l√©ration
        results.innerHTML += '<h2>Test 3: Cas de d√©c√©l√©ration</h2>';

        try {
            const fromCone = { x: 0, t: 0 };
            const toCone = { x: -5, t: 10 }; // D√©c√©l√©ration
            
            const trajectory = calculateAccelerationTrajectory(fromCone, toCone, 0.5);
            
            if (trajectory.length > 0 && trajectory[0].rendezvous) {
                const rendezvous = trajectory[0].rendezvous;
                results.innerHTML += `
                    <p>‚úÖ D√©c√©l√©ration g√©r√©e:</p>
                    <ul>
                        <li>Acc√©l√©ration Œ±: ${rendezvous.alpha.toFixed(4)} c/an ${rendezvous.alpha < 0 ? '(n√©gative ‚úÖ)' : '(positive ‚ùå)'}</li>
                        <li>Vitesse finale v_f: ${rendezvous.v_f.toFixed(3)} c ${rendezvous.v_f < 0 ? '(n√©gative ‚úÖ)' : '(positive ‚ùå)'}</li>
                    </ul>
                `;
            }

        } catch (error) {
            results.innerHTML += `<p>‚ùå Erreur: ${error.message}</p>`;
        }

    </script>
</body>
</html> 